<section class="app-header" [ngClass]="{'app-header--shrinked': isShrinked$ | async}">
  <div class="app-header__desktop-mode">
    <app-logo routerLink="/" [size]="(isShrinked$ | async) ? 'xs' : 'sm'" class="mr-4 align-items-center"></app-logo>

    <ul class="d-flex flex-grow-1 justify-content-start align-items-center">
      <li class="app-header__item" *ngFor="let ctrl of headerControls">
        <a (click)="onClickHeaderControl(ctrl.scrollTarget)" tabindex="0" class="app-header__link">{{ ctrl.uiName | translate | uppercase }}</a>
      </li>

      <li>
        <app-language-bar [items]="languages" (languageChange)="onLanguageChange($event)"></app-language-bar>
      </li>

      <li class="app-header__item app-header__item--delimiter"></li>

      <li class="app-header__item">
        <app-header-user-menu (clickMenuItem)="onClickUserMenu($event)" [items]="isLoggedIn ? authUserControls : notAuthUserControls">
          <a [attr.aria-label]="'header.user-button' | translate" class="app-header__link default-hover user-link">
            <app-icon name="user" size="xl"></app-icon>
          </a>
        </app-header-user-menu>
      </li>

      <li class="app-header__item app-header__item--delimiter"></li>

      <li class="app-header__item">
        <a tabindex="0" [attr.aria-label]="'header.cart-button' | translate" class="app-header__link hover-opacity">
          <app-icon name="cart" size="xl"></app-icon>
        </a>
      </li>
    </ul>
  </div>

  <div class="app-header__mobile-mode">
    <app-logo size="sm" class="mr-4"></app-logo>

    <div class="d-flex align-items-center">
      <li>
        <app-language-bar [items]="languages" (languageChange)="onLanguageChange($event)"></app-language-bar>
      </li>

      <ng-container *ngIf="isLoggedIn">
        <li class="app-header__item app-header__item--delimiter"></li>

        <li
          [ngClass]="{'app-header__item--is-open': isUserMenuOpen}"
          class="app-header__item app-header__item--mobile-icon"
        >
          <a
            clickOutside
            (clickOutside)="onToggleUserMenu(false)"
            (click)="onToggleUserMenu()"
            class="app-header__link"
          >
            <app-icon name="user" size="xl"></app-icon>
          </a>
        </li>
      </ng-container>

      <li class="app-header__item app-header__item--delimiter"></li>

      <li class="app-header__item app-header__item--mobile-icon">
        <a class="app-header__link">
          <app-icon name="cart" size="xl"></app-icon>
        </a>
      </li>

      <li class="app-header__item app-header__item--delimiter"></li>

      <app-hamburger
        (isOn)="onToggleMenu()"
        [ngClass]="{'app-header__burger--is-open': isMenuOpen}"
        class="app-header__burger"
      ></app-hamburger>
    </div>
  </div>

  <div *ngIf="isMenuOpen || isUserMenuOpen" class="overlay"></div>

  <ul [ngClass]="{'mobile-menu--visible': isMenuOpen}" class="mobile-menu">
    <li *ngFor="let ctrl of headerControls" class="my-3">
      <a class="mobile-menu__link">{{ ctrl.uiName | translate | uppercase }}</a>
    </li>
  </ul>

  <ul [ngClass]="{'mobile-menu--visible': isUserMenuOpen}" class="mobile-menu">
    <ng-container *ngIf="isLoggedIn">
      <li *ngFor="let ctrl of authUserControls" class="my-3">
        <a (click)="onClickUserMenu(ctrl)" class="mobile-menu__link">{{ ctrl.uiName | translate | uppercase }}</a>
      </li>
    </ng-container>

    <ng-container *ngIf="!isLoggedIn">
      <li *ngFor="let ctrl of notAuthUserControls" class="my-3">
        <a (click)="onClickUserMenu(ctrl)" class="mobile-menu__link">{{ ctrl.uiName | translate | uppercase }}</a>
      </li>
    </ng-container>
  </ul>

</section>
